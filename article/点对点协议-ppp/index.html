<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='数据链路层主要有两种通信方式： 点对点信道：一对一，点对点通信方式。 广播信道：一对多的广播通信方式。 1、使用点对点信道的数据链路层 1.1、数据'><title>点对点协议 PPP</title>

<link rel='canonical' href='https://zhuaowei.github.io/article/%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp/'>

<link rel="stylesheet" href="/scss/style.min.5a8e892f6fa14515e9065eee1f5d2e05302606ec7f11750b2fb95198f9cdcbfd.css"><meta property='og:title' content='点对点协议 PPP'>
<meta property='og:description' content='数据链路层主要有两种通信方式： 点对点信道：一对一，点对点通信方式。 广播信道：一对多的广播通信方式。 1、使用点对点信道的数据链路层 1.1、数据'>
<meta property='og:url' content='https://zhuaowei.github.io/article/%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp/'>
<meta property='og:site_name' content='zhuaowei的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='计算机网络' /><meta property='article:tag' content='数据链路层' /><meta property='article:tag' content='PPP' /><meta property='article:published_time' content='2022-11-04T21:20:42&#43;08:00'/><meta property='article:modified_time' content='2022-11-04T21:20:42&#43;08:00'/>
<meta name="twitter:title" content="点对点协议 PPP">
<meta name="twitter:description" content="数据链路层主要有两种通信方式： 点对点信道：一对一，点对点通信方式。 广播信道：一对多的广播通信方式。 1、使用点对点信道的数据链路层 1.1、数据">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hub47f27f435bd711377cba81e3a215c97_104946_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">⌚</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">zhuaowei的博客</a></h1>
            <h2 class="site-description">明月几时有？把酒问青天。</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/zhuaowei'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        

        <li >
            <a href='/tags' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>标签</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/article/%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp/">点对点协议 PPP</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2022-11-04</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 11 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>数据链路层主要有两种通信方式：</p>
<p><strong>点对点信道</strong>：一对一，点对点通信方式。</p>
<p><strong>广播信道</strong>：一对多的广播通信方式。</p>
<h2 id="1使用点对点信道的数据链路层">1、使用点对点信道的数据链路层</h2>
<h3 id="11数据链路和帧">1.1、数据链路和帧</h3>
<p><strong>链路（link，物理链路）</strong>：从一个结点到相邻结点的一段物理通路（有线或无线），而中间没有任何其他交换结点。</p>
<p><strong>数据链路（data link， 逻辑链路）</strong>：除了必须有一条物理线路外，还必须有一些必要的通信协议来控制这些数据的传输。实现协议的软硬件加到链路上，就构成了数据链路。</p>
<p>通常用<strong>网络适配器</strong>（既有软件，也有硬件）来实现这些协议，包括数据链路层和物理层的功能。</p>
<p><strong>规程（procedure）</strong>：早期通信协议的叫法，在数据链路层，这俩是同义词。</p>
<p><strong>帧</strong>：点对点信道的数据链路层的协议数据单元。</p>
<p><strong>IP数据报（数据报、分组、包）</strong>：网络层的协议数据单元。</p>
<p>通信步骤：</p>
<ol>
<li>A 的数据链路层将网络层交下来的 IP 数据报<strong>添加首部和尾部封装程帧</strong>。</li>
<li>结点 A 把封装好的帧发送给结点 B 的数据链路层。</li>
<li>若 B 的数据链路层收到的帧<strong>无差错</strong>，从帧中提取出 IP 数据报交给网络层；否则丢弃这个帧。</li>
</ol>
<h3 id="12三个基本问题">1.2、三个基本问题</h3>
<p>三个基本问题：<strong>封装成帧</strong>、<strong>透明传输</strong>和<strong>差错检测</strong>。</p>
<p><strong>1、封装成帧</strong></p>
<p>在一段数据的前后<strong>分别添加首部和尾部</strong>。在传输比特流时，数据链路层就能根据首部和尾部的标记识别出报文的开始和结束，这也是首部和尾部最重要的作用——<strong>帧定界</strong>。</p>
<p><strong>MTU（Maximum Transfer Unit）</strong>：<strong>最大传输单元</strong>，数据链路层规定了传送的帧的数据部分长度上限。</p>
<p>当数据是由可打印的 ASCII 码组成的文本文件是，帧定界可以使用特殊的帧定界符。</p>
<blockquote>
<p>ASCII 码由 7 bit 表示，一共由 128 个字符，其中包括 95 个可打印字符，33 个不可打印字符。</p>
</blockquote>
<p>**控制字符 SOH（Start Of Header， 十六进制是 0X01）<strong>放在一帧的最前面，表示帧的首部开始。另一个</strong>控制字符EOT（End Of Transmission，十六进制是 0X04）**表示帧的结束。</p>
<p><strong>2、透明传输</strong></p>
<p>因为帧的开始和结束标记使用的专门的字符，所以在报文中间任何 8 bit的组合都<strong>不允许出现和开始结束标记一样的编码</strong>。</p>
<p>如果传输的内容是由键盘输入的，那么永远都不会出现开始结束标记，永远可以放在真中传输，这样的传输就是<strong>透明传输</strong>，也叫<strong>无差错传输（原样传输）</strong>。</p>
<p>如果传输的是二进制编码或者图像，那么就有可能出现开始和结束的字符，这样的传输就不是透明传输。</p>
<p><strong>透明</strong>：表示一个实际存在的事物看起来却好像不存在一样，例如玻璃。在数据链路层透明传输意思就是，无论什么样的数据都能够无差错地原样通过这个数据链路层。</p>
<p><strong>转义字符</strong></p>
<p>为了解决报文中可能出现的控制字符，就需要对出现开始结束控制字符进行转义，在SOH和EOT前面插入一个<strong>转义字符 “ESC”（十六进制是0X1B）</strong>。接收端的数据链路层在上交网络层之前将转义字符 ESC 删去。这种方法称为<strong>字节填充（byte stuffing）或字符填充（character stuffing）</strong>。</p>
<p>如果转义字符也出现在数据中，就在转义字符前面再加一个转义字符。接收端收到两个转义字符就删除前面的一个。</p>
<p><strong>3、差错检测</strong></p>
<p><strong>比特差错</strong>：在传输中，0 可能会变成 1，1 也有可能变成0。</p>
<p><strong>误码率 BER（Bit Error Rate）</strong>：传输错误的比特数占总数的比率。</p>
<p>误码率和信噪比有很大关系，提高信噪比可以降低误码率。</p>
<p>比特差错是无法避免的，目前数据链路层广泛试用了<strong>循环冗余检验 CRC（Cyclic Redundancy Check）</strong>。</p>
<p><strong>检测原理</strong>：在发送端将要发送的数据分组，每组 k 个比特。假设要发送的数据是M（k bit），就在数据的末尾添加一个 n 位的<strong>冗余码</strong>，所以一共要发送 （k + b）比特。</p>
<p><strong>计算过程</strong>：首先在数据 M 末尾补上 n 个 0，用二进制的<strong>模 2 运算</strong>进行计算。得到的（k + n）位的数<strong>除以</strong>双方实现商定的长度位 （n + 1）位的除数 P得出的商是 Q，而<strong>余数 R 是 n 位的</strong>。</p>
<blockquote>
<p>模 2 运算：加法和减法一样，不进位。1111 + 1010 = 0101。</p>
</blockquote>
<p>计算出的 余数 R 作为<strong>帧检测序列 FCS（Frame Check Sequence）</strong>，添加到数据的末尾发送出去。FCS 就是冗余码。</p>
<p><strong>检测方法</strong>：接收端把接受到的每一个帧都除以同样的除数 P（模 2 运算），然后检查得到余数 R。如果传输过程中没有差错，那么经过 CRC 检验后，得到的余数是 0。</p>
<p>如果出现差错，得到的余数还是 0 的<strong>概率是非常非常小的</strong>。</p>
<p>如果接收的帧是有差错的，那么数据链路层就会丢弃这个帧，换句话说，<strong>凡是接收的帧，我们都能以非常接近 1 的概率认为这些帧在传输过程中无差错</strong>。</p>
<p><strong>可靠传输</strong>：依靠上面的差错检测，并不能做到可靠传输，因为差错并不是只有比特差错一种，还有可能是另一种差错，即<strong>帧丢失、帧重复和帧失序</strong>。</p>
<p>在过去，为了保证数据链路层上交的数据是可靠的，对于发送方发送的数据，数据链路层在 CRC 的基础上，增加了<strong>帧编号、确认和重传机制</strong>。数据链路层的发送方对于发送的每一个帧都<strong>要求接受方在一定时间内给出确认</strong>，否则就认为传输出现了差错，因而进行重传，直到收到确认为止。</p>
<p>现在网络质量大大提高，出现伤处差错的情况很少见，因此互联网采取了区别对待的情况：对于质量良好的网络，不要求数据链路层向上层提供可靠传输的服务，即不使用确认和重传机制，可靠传输由上层协议实现（例如 TCP 协议）；对于质量较差的网络，数据链路层向上提供可靠的传输服务，即使用确认和重传机制。</p>
<h2 id="2点对点协议-ppp">2、点对点协议 PPP</h2>
<p><strong>点对点协议 PPP（Point-to-Point Protocol）</strong>：是目前使用最广泛的数据链路层协议。</p>
<h3 id="21ppp-协议的特点"><strong>2.1、PPP 协议的特点</strong></h3>
<p>PPP 协议就是用户计算机和 ISP 进行通信时使用的数据链路层协议。</p>
<p><strong>1、PPP 协议应满足的需求</strong></p>
<ol>
<li><strong>简单</strong>：对数据链路层的帧，不需要纠错，不需要序号，也不需要流量控制。<strong>首要的要求就是”简单“</strong>。</li>
<li><strong>封装成帧</strong>：必须使用特殊的字符作为<strong>帧定界符</strong>，便于接收端准确判断帧的开始和结束位置。</li>
<li><strong>透明性</strong>：如果数据中碰巧出现帧定界符的比特组合，就要采取有效的措施解决。</li>
<li><strong>多种网络协议</strong>：必须在同一物理链路上同时支持多种网络层协议。</li>
<li><strong>多种类型链路</strong>：必须能在多种类型的链路上运行。</li>
<li><strong>差错检测（error detection）</strong>：必须能对接收端收到的帧进行检测，并<strong>立即丢弃有差错的帧</strong>。</li>
<li><strong>检测连接状态</strong>：必须有一种机制能够及时（不超过几分钟）自动检测出链路是否处于正常状态。</li>
<li><strong>最大传送单元</strong>：必须对每一种点对点的链路<strong>设置最大传送单元 MTU 的默认值</strong>。</li>
<li><strong>网络层地址协商</strong>：必须提供一种机制使通信的两个网络层的实体能够通过协商或能够配置彼此的网络层地址。</li>
<li><strong>数据压缩协商</strong>：必须提供一种方法来协商使用数据压缩算法。但并不要求将数据压缩算法进行标准化。</li>
</ol>
<blockquote>
<p>在 TCP/IP 协议族中，可靠传输由运输层的 TCP 协议负责，因此 PPP 协议并不需要进行纠错，不需要设置序号，也不需要进行流量控制。</p>
<p>PPP 协议只支持点对点的链路通信，且只支持双全工通信。</p>
</blockquote>
<p><strong>2、PPP 协议的组成</strong></p>
<ol>
<li>一个将 IP 数据报封装到串行链路的方法。</li>
<li>一个用来建立、配置和测试数据链路连接的<strong>链路控制协议 LCP（Link Control Protocol）</strong>。</li>
<li>一套<strong>网络控制协议 NCP（Network Control Protocol）</strong>，其中的每一个协议支持不同的网络层协议，如 IP、OSI 的网络层、DECnet、AppleTalk等。</li>
</ol>
<h3 id="22ppp-协议的帧格式">2.2、PPP 协议的帧格式</h3>
<p><strong>1、各字段的意义</strong></p>
<p>PPP 的帧格式由首部和尾部组成，分别有 4 个字段和 2 个字段。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">先发送
</span></span><span class="line"><span class="cl">  | F  |  A | C  |  协议   |    信息部分    |   FCS  | F |
</span></span><span class="line"><span class="cl">  | 7E | FF | 03 |        |    信息部分    |        | 7E|
</span></span><span class="line"><span class="cl">  | &lt;------- 首部 -------&gt; |   IP 数据报    |   尾部      |
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>首部</strong></p>
<ol>
<li><strong>F（Flag）</strong>：1 字节，标志字段，开始帧定界符，规定为 0X7E。和结束帧定界符一样，<strong>表示帧的开始或结束</strong>。</li>
<li><strong>A（Address）</strong>：1 字节，地址字段，规定为 0XFF。</li>
<li><strong>C（Control）</strong>：1 字节，控制字段，规定为 0X03。<strong>A、C 两个字段实际上并没有携带 PPP 帧任何信息</strong>。</li>
<li><strong>协议</strong>：2 字节。如果为 0X0021，信息部分就是 IP 数据报；如果是 0XC021，信息字段就是 PPP 链路控制协议 LCP 的数据；如果是 0X8021 ，就是网络层的控制数据。</li>
</ol>
<p><strong>尾部</strong></p>
<ol>
<li><strong>FCS</strong>：使用 CRC 的帧检验序列 FCS。</li>
<li><strong>F（Flag）</strong>：1字节，标志字段，同开始帧定界符。</li>
</ol>
<p><strong>信息部分</strong>：长度是可变的，不超过 1500 字节。</p>
<p><strong>2、字节填充</strong></p>
<p>当信息字段中出现和标志字段（0X7E）一样的比特组合时，就必须采取一些措施使这种形式上可标志字段一样的比特组合不出现在信息字段中。</p>
<p>当 PPP 使用异步传输时，把转义字符定为 0X7D（01111101），并使用<strong>字节填充</strong>。</p>
<ol>
<li><code>0x7E</code> -&gt; <code>0x7D,0x5E</code></li>
<li><code>0x7D</code> -&gt; <code>0x7D,0x5D</code></li>
<li>ASCII 码中的控制字符（小于 0x20 的字符），在前面加一个转义字符 0x7D，并改变编码。例如 <code>0x03</code> -&gt; <code>0x7D,0x23</code>。</li>
</ol>
<p>由于在发送段进行了字节填充，在链路上传输的字节数就超过了原来的字节数。在接收端收到数据之后，进行与发送端相反的操作，就恢复出了原来的信息。</p>
<p><strong>3、零比特填充</strong></p>
<p>PPP 协议在 SONET/SDH 链路时，使用同步传输而不是异步传输，这中情况下使用零比特填充实现透明传输。</p>
<blockquote>
<p>同步传输：一连串的比特连续传送。</p>
<p>异步传输：逐个字符地传送。</p>
</blockquote>
<p><strong>实现方法</strong></p>
<p>发送端：先扫描整个信息字段，只要发现有 5 个连续 1，就立即填入一个0。</p>
<p>接收端：先找到标志字段 F以确定一个帧的边界，然后扫描其中的比特流，当发现 5 个连续 1 时，就删除后面的一个 0。</p>
<h3 id="23ppp-协议的工作状态">2.3、PPP 协议的工作状态</h3>
<p>PPP 链路的初始化：当用户拨号接入 ISP 后，就建立了一条从用户隔热电脑到 ISP 的物理层连接。之后用户电脑向 ISP 发送一系列链路控制协议 LCP 分组（封装成多个 PPP 帧），以便建立 LCP 连接。这些分组及响应选择了将要使用的一些 PPP 参数。</p>
<p>接下来还要进行网络层的配置，网络控制协议 NCP 给新接入的用户电脑分配一个临时的 IP 地址。这样用户电脑就称为互联网上一个有 IP 地址的主机了。</p>
<p>当用户通信完毕时，NCP 释放网络层连接，收回分配出去的 IP 地址。接下来，LCP 协议释放数据链路层连接，最后释放的时物理层的连接。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">   +----------------------------&gt; 链路静止                设备之间无链路
</span></span><span class="line"><span class="cl">   |              /                 |                        |
</span></span><span class="line"><span class="cl">   |              |                 | 物理层连接建立           |
</span></span><span class="line"><span class="cl">LCP 链路终止     LCP 配置             V                        V
</span></span><span class="line"><span class="cl">   ^            协商失败 &lt;--------- 链路建立                 物理链路
</span></span><span class="line"><span class="cl">   |                                | LCP 配置协商            |
</span></span><span class="line"><span class="cl">   |            鉴别失败             V                        V
</span></span><span class="line"><span class="cl">链路终止 &lt;------------------------- 鉴别                    LCP 链路
</span></span><span class="line"><span class="cl">   ^                               | 鉴别成功或无须鉴别         |
</span></span><span class="line"><span class="cl">   |                               V                         V
</span></span><span class="line"><span class="cl">   |                            网络层协议                已鉴别的 LCP 链路
</span></span><span class="line"><span class="cl">链路故障或关闭请求                    |                         |
</span></span><span class="line"><span class="cl">   |                               | NCP 协商                 |
</span></span><span class="line"><span class="cl">   |                               V                         V
</span></span><span class="line"><span class="cl">   +---------------------------- 链路打开                已鉴别的 LCP 链路
</span></span><span class="line"><span class="cl">                                                        和 NCP 链路
</span></span></code></pre></td></tr></table>
</div>
</div><p>PPP 链路的起始和终止状态永远是<strong>链路静止</strong>，这时用户电脑和 ISP 的路由器之间并不存在物理层的连接。</p>
<p>当用户电脑通过调制解调器呼叫路由器时，路由器就能检测到其发出的载波信号，双方建立了物理连接后，PPP 就进入了**链路建立（Link Establish）**状态，目的是建立链路层的 LCP 连接。</p>
<p>这时 LCP 开始协商一些配置选项，即发送 <strong>LCP 的配置请求帧（Configure-Request）</strong>。这时一个 PPP 帧，其协议字段是 LCP 对应的代码，信息字段包含特定的配置请求。另一端可以发送以下几种响应的一种：</p>
<ol>
<li><strong>配置确认帧（Configure-Ack）</strong>：所有选项都接受。</li>
<li><strong>配置否认帧（Configure-Nak）</strong>：所有选项都理解，但不能接受。</li>
<li><strong>配置拒绝帧（Configure-Reject）</strong>：选项有些无法识别或不能接受，需要协商。</li>
</ol>
<p>LCP 配置选项包括：链路上的最大帧长、所使用的鉴别协议（authentication protocol）（如果有），以及不适用 PPP 帧中的地址和控制字段（因为是固定的，且没有任何意义）。</p>
<p>协商结束后双方就建立了 LCP 链路，接着就进入了**鉴别（Authenticate）<strong>状态。这一状态中，只允许传送 LCP 协议的分组、鉴别协议的分组以及监测链路质量的分组。若鉴别失败，则转到</strong>链路终止（Link Terminate）<strong>状态。若鉴别成功则进入</strong>网络层协议（Network-Layer Protocol）**状态。</p>
<blockquote>
<p>鉴别协议：可以使用 <strong>口令鉴别协议 PAP（Password Authentication Protocol）</strong>，如果为了更好的安全性，可以使用更复杂的 握手鉴别协议（Challenge-Handshake Authentication Protocol）。</p>
<p>鉴别由发起通信的一方发送身份识别表示符和口令，系统允许用户重试若干次。</p>
</blockquote>
<p>在<strong>网络层协议</strong>状态，PPP 链路的两端的网络控制协议 NCP 根据网络层的不同协议互相交换网络层特定的网络控制分组。</p>
<blockquote>
<p>因为现在的路由器支持多种网络层协议，所以这个步骤很重要。虽然两端使用不同的网络测协议，但是仍然可以使用同一个 PPP 协议进行通信。</p>
<p>如果 PPP 链路上运行的是 IP 协议，则 PPP 链路的每一端配置 IP 协议模块（如分配 IP 地址）时就要使用 NCP 中支持 IP 的协议——IP 控制协议 IPCP（IP Control Protocol）。IPCP 协议也封装成 PPP 帧在链路上传送，其协议字段为 0x8021。</p>
<p>在低速链路上运行时，双方还可以协商使用压缩的 TCP 和 IP 首部，减少在链路上发送的比特数。</p>
</blockquote>
<p>当网络层配置完成后，链路就进入可进行数据通信的<strong>链路打开（Link Open）<strong>状态。这时，链路的两个 PPP 端点可以互相发送分组，还可以发送</strong>回送请求 LCP 分组（Echo-Request）<strong>和</strong>回送回答 LCP 分组（Echo-Reply）</strong>，以检查链路的状态。</p>
<p>数据传输结束后，可以有链路的一端发出<strong>终止请求 LCP 分组（Terminate-Request）<strong>请求终止链路连接，在收到对方发来的</strong>终止确认 LCP 分组（Terminate-Ack）<strong>后，转到</strong>链路终止</strong>状态，如果链路出现故障，也会从<strong>链路打开</strong>转到<strong>链路终止</strong>。当调制解调其的载波停止后，则回到<strong>链路静止</strong>状态。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>
        
            <a href="/tags/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">数据链路层</a>
        
            <a href="/tags/ppp/">PPP</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/article/%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">使用广播信道的数据链路层</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/article/tcp-%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP 的三次握手和四次挥手</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/article/tcp-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP 的拥塞控制</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/article/tcp-%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP 的流量控制</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/article/tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP 可靠传输的实现</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2024 zhuaowei的博客
    </section>
    
    <section class="powerby">
        
            hello world <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.13.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
